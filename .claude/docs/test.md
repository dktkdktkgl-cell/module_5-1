# 테스트 계획

로그인/회원가입 기능에 대한 테스트 항목을 정리합니다.

## DB 테스트 (Database)

### User 모델 테스트
- [ ] User 모델 생성 및 필드 검증
- [ ] username 유니크 제약 조건 테스트
- [ ] email 유니크 제약 조건 테스트
- [ ] created_at 자동 생성 확인
- [ ] is_active 기본값 확인

### CRUD 함수 테스트
- [ ] create_user: 새 사용자 생성 성공
- [ ] create_user: 비밀번호 해싱 확인
- [ ] create_user: 이메일 소문자 변환 확인
- [ ] get_user_by_email: 이메일로 사용자 조회
- [ ] get_user_by_email: 존재하지 않는 이메일 처리
- [ ] get_user_by_username: 유저명으로 사용자 조회
- [ ] get_user_by_id: ID로 사용자 조회
- [ ] verify_password: 올바른 비밀번호 검증
- [ ] verify_password: 잘못된 비밀번호 검증
- [ ] get_password_hash: 비밀번호 해싱 함수 동작 확인

## BE 테스트 (Backend API)

### 회원가입 엔드포인트 (/api/auth/register)
- [ ] 정상적인 회원가입 요청 성공 (201)
- [ ] 중복 이메일 거부 (409)
- [ ] 중복 유저명 거부 (409)
- [ ] 유효하지 않은 이메일 형식 거부 (422)
- [ ] 짧은 유저명 거부 (422, < 3자)
- [ ] 짧은 비밀번호 거부 (422, < 8자)
- [ ] 응답에 비밀번호 해시 미포함 확인

### 로그인 엔드포인트 (/api/auth/login)
- [ ] 올바른 인증 정보로 로그인 성공 (200)
- [ ] JWT 토큰 발급 확인
- [ ] 존재하지 않는 이메일로 로그인 실패 (401)
- [ ] 잘못된 비밀번호로 로그인 실패 (401)
- [ ] 대소문자 다른 이메일로 로그인 성공 (이메일 정규화 확인)

### 현재 사용자 조회 엔드포인트 (/api/auth/me)
- [ ] 유효한 토큰으로 사용자 정보 조회 (200)
- [ ] 토큰 없이 요청 시 실패 (401)
- [ ] 유효하지 않은 토큰으로 요청 시 실패 (401)
- [ ] 만료된 토큰으로 요청 시 실패 (401)

### JWT 유틸리티 테스트
- [ ] create_access_token: 토큰 생성 확인
- [ ] create_access_token: 만료 시간 설정 확인
- [ ] 토큰 디코딩 및 sub 필드 확인

## FE 테스트 (Frontend)

### 로그인 페이지 (/login)
- [ ] 페이지 렌더링 확인
- [ ] 이메일 입력 필드 존재 확인
- [ ] 비밀번호 입력 필드 존재 확인
- [ ] 로그인 버튼 존재 확인
- [ ] 회원가입 링크 존재 확인

### 로그인 폼 검증
- [ ] 빈 이메일 제출 시 에러 메시지 표시
- [ ] 유효하지 않은 이메일 형식 제출 시 에러 메시지
- [ ] 빈 비밀번호 제출 시 에러 메시지 표시
- [ ] 짧은 비밀번호 제출 시 에러 메시지
- [ ] 로딩 중 버튼 비활성화 확인

### 회원가입 페이지 (/register)
- [ ] 페이지 렌더링 확인
- [ ] 유저명 입력 필드 존재 확인
- [ ] 이메일 입력 필드 존재 확인
- [ ] 비밀번호 입력 필드 존재 확인
- [ ] 회원가입 버튼 존재 확인
- [ ] 로그인 링크 존재 확인

### 회원가입 폼 검증
- [ ] 빈 유저명 제출 시 에러 메시지
- [ ] 짧은 유저명 제출 시 에러 메시지 (< 3자)
- [ ] 빈 이메일 제출 시 에러 메시지
- [ ] 유효하지 않은 이메일 형식 에러
- [ ] 빈 비밀번호 제출 시 에러 메시지
- [ ] 짧은 비밀번호 제출 시 에러 메시지 (< 8자)

### AuthContext 테스트
- [ ] 초기 상태 확인 (user: null, isLoading: true)
- [ ] login 함수: 성공 시 사용자 정보 설정
- [ ] login 함수: 실패 시 에러 발생
- [ ] logout 함수: 토큰 및 사용자 정보 제거
- [ ] 토큰 자동 로딩 확인
- [ ] localStorage에서 토큰 복원 확인

### 보호된 라우트 테스트
- [ ] ProtectedRoute: 인증된 사용자 접근 허용
- [ ] ProtectedRoute: 미인증 사용자 리다이렉트
- [ ] Header: 로그인 상태에 따른 UI 변경

---

## 테스트 실행 방법

### Backend
```bash
cd backend
pytest tests/ -v
```

### Frontend
```bash
cd frontend
npm test
```

### Database
```bash
cd backend
pytest tests/test_db.py -v
```
